<!DOCTYPE html>
<html lang="en">
  <title>Table Component</title>
  <head>
    <link
      rel="stylesheet"
      href="../../../node_modules/bootstrap/dist/css/bootstrap.css"
    />
    <!-- <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    /> -->
    <link
      rel="stylesheet"
      href="../../../node_modules/lit-fontawesome/css/font.css"
    />
    <link rel="stylesheet" href="../../styles/components.css" />

    <style></style>
  </head>
  <body>
    <div class="title">Table</div>
    <div class="demo-wrapper">
      <div class="main">
        <section>
          <section class="section">
            <section class="display-box" id="db-1">
              <section class="display-box-demo">
                <table-component id="table1" sticky noBorderCollapsed>
                  <!-- <span slot="caption">This is a caption</span> -->
                </table-component>
              </section>
              <section class="display-box-meta markdown">
                <div class="display-box-title">Basic Usage</div>
                <div class="display-box-description">Text</div>
                <div class=""></div>
              </section>
            </section>
          </section>

          <section class="section">
            <section class="display-box" id="db-1">
              <section class="display-box-demo">
                <table-component id="table2" caption="top" responsive>
                  <span slot="caption">Example Caption</span>
                </table-component>
              </section>
              <section class="display-box-meta markdown">
                <div class="display-box-title">Basic Usage</div>
                <div class="display-box-description">Text</div>
                <div class=""></div>
              </section>
            </section>
          </section>
        </section>

        <section>
          <section class="section">
            <section class="display-box" id="db-1">
              <section class="display-box-demo">
                <table-component id="table3" caption="top" responsive>
                  <span slot="caption">Example Caption</span>
                </table-component>
              </section>
              <section class="display-box-meta markdown">
                <div class="display-box-title">Basic Usage</div>
                <div class="display-box-description">Text</div>
                <div class=""></div>
              </section>
            </section>
          </section>

          <section class="section">
              <section class="display-box" id="db-1">
                <section class="display-box-demo">
                    <button onclick="resetTableSort('table4')">Reset Sort</button>
                    <table-component id="table4" sortable caption="top" responsive>
                        <span slot="caption">Example Caption</span>
                      </table-component>
                </section>
                <section class="display-box-meta markdown">
                  <div class="display-box-title">Basic Usage</div>
                  <div class="display-box-description">Text</div>
                  <div class=""></div>
                </section>
              </section>
            </section>
        </section>
      </div>
    </div>



    <script type="module" src="./table.js"></script>
    <script>
      const tableA = document.getElementById("table1");
      tableA.items = [
        { name: "John", age: 30, city: "New York" },
        { name: "Anna", age: 25, city: "London", _rowVariant: "primary" },
        {
          name: "Mike",
          age: 32,
          city: "Chicago",
          _cellVariants: { age: "info", name: "warning" },
        },
        { name: "Terry", age: 21, city: "Augusta", _rowVariant: "secondary" },
        {
          name: "Clark",
          age: 56,
          city: "Tucson",
          _cellVariants: { age: "success", city: "danger" },
        },
        { name: "Seth", age: 31, city: "Pittsburgh" },
      ];

      const table = document.getElementById("table2");

      // Define the items (data)
      table.items = [
        {
          age: 40,
          first_name: "Thor",
          last_name: "MacDonald",
          _cellVariants: { age: "info", first_name: "warning" },
          _rowVariant: "primary",
          _showDetails: true,
        },
        {
          age: 25,
          first_name: "Anna",
          last_name: "Smith",
          _cellVariants: { age: "success", last_name: "danger" },
          _rowVariant: "secondary",
          _showDetails: true,
        },
      ];

      // Handle the custom event to dynamically inject row details
      table.addEventListener("render-row-details", (event) => {
        const { rowData, rowIndex } = event.detail;

        // Create a container for the details content
        const detailsContent = document.createElement("div");
        detailsContent.innerHTML = `<p>Details for ${rowData.first_name}, Age: ${rowData.age}</p>`;

        // Find the correct slot element in the shadow DOM and append the content
        const slotElements = table.shadowRoot.querySelectorAll(
          `slot[name="row-details"]`
        );
        if (slotElements[rowIndex]) {
          slotElements[rowIndex].innerHTML = ""; // Clear existing content
          slotElements[rowIndex].appendChild(detailsContent);
        }
      });

      const tableB = document.getElementById("table3");

      // Define the fields to customize columns
      tableB.fields = [
        { key: "first_name", label: "First Name" },
        { key: "last_name", label: "Last Name" },
        { key: "age", label: "Person Age", sortable: true, variant: "danger" },
      ];

      // Define the items (data)
      tableB.items = [
        {
          age: 40,
          first_name: "Thor",
          last_name: "MacDonald",
          _cellVariants: { age: "info", first_name: "warning" },
          _rowVariant: "primary",
          _showDetails: true,
        },
        {
          age: 25,
          first_name: "Anna",
          last_name: "Smith",
          _cellVariants: { age: "success", last_name: "danger" },
          _rowVariant: "secondary",
          _showDetails: true,
        },
      ];

      // Handle the custom event to dynamically inject row details
      tableB.addEventListener("render-row-details", (event) => {
        const { rowData, rowIndex } = event.detail;

        // Create a container for the details content
        const detailsContent = document.createElement("div");
        detailsContent.innerHTML = `<p>Details for ${rowData.first_name}, Age: ${rowData.age}</p>`;

        // Find the correct slot element in the shadow DOM and append the content
        const slotElements = tableB.shadowRoot.querySelectorAll(
          `slot[name="row-details"]`
        );
        if (slotElements[rowIndex]) {
          slotElements[rowIndex].innerHTML = ""; // Clear existing content
          slotElements[rowIndex].appendChild(detailsContent);
        }
      });

      function resetTableSort(tableId) {
      const table = document.getElementById(tableId);
      if (table && typeof table.resetSort === 'function') {
        table.resetSort();
      }
    }

      const tableC = document.getElementById("table4");

      // Define the fields with additional properties
      tableC.fields = [
        { key: "last_name", sortable: true },
        { key: "first_name", sortable: true },
        { key: "age", label: "Person Age", sortable: true },
      ];

      // Define the items (data)
      tableC.items = [
        {
          age: 40,
          first_name: "Thor",
          last_name: "MacDonald"
        },
        {
          age: 20,
          first_name: "Pete",
          last_name: "MacDonald"
        },
        {
          age: 25,
          first_name: "Anna",
          last_name: "Smith"
        },
        {
          age: 36,
          first_name: "Zachary",
          last_name: "Peterson"
        },
      ];

      // Handle the custom event to dynamically inject row details
      tableC.addEventListener('render-row-details', (event) => {
      const { rowData, rowIndex } = event.detail;
      
      // Create a container for the details content
      const detailsContent = document.createElement('div');
      detailsContent.innerHTML = `<p>Details for ${rowData.first_name}, Age: ${rowData.age}</p>`;

      // Find the correct slot element in the shadow DOM and append the content
      const slotElements = tableC.shadowRoot.querySelectorAll(`slot[name="row-details"]`);
      if (slotElements[rowIndex]) {
        slotElements[rowIndex].innerHTML = ''; // Clear existing content
        slotElements[rowIndex].appendChild(detailsContent);
      }
      });
    </script>
  </body>
</html>
